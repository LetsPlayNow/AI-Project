<% provide :title, 'Last success Simulation'%>
<% provide :head do %>
  <%= javascript_include_tag 'jquery', 'lib/pixi', 'visualizer'%>
  <%= stylesheet_link_tag 'game_sessions/simulation'%>
<% end %>

<% provide :body do %>
    <div class="container">
      <div class="row">
        <div class="panel btn-group btn-group-justified" role="group" aria-label="...">
          <div class="btn-group" role="group">
            <%= button_to 'Go back', 'game_page', class: 'btn btn-info btn-lg', method: :get %>
          </div>
          <% unless @game.is_active? %>
              <div class="btn-group" role="group">
                <%= button_to 'Finish game', 'finish_game', class: 'btn btn-warning btn-lg' %>
              </div>
          <% end %>

        </div>
    </div>

      <% if @simulator_output[:errors] %>
          <div class="panel panel-danger">
            <div class="panel-heading"><strong>Errors in simulation</strong></div>
            <div class="panel-body"><strong><%= @simulator_output[:errors] %></strong></div>
          </div>
      <% end %>

      <div id="view" class="row">
        <!--<%= image_tag('game_sessions/squares.gif', id: 'wait-gif') %>-->
      </div>
  </div>

  <script>
    // TODO здесь нужен ненавязчивый JavaScript
    var background_sprite_url = '<%=image_path('game_sessions/background.jpg')%>';
    var unit_sprite_url  = '<%=image_path('game_sessions/unit.png') %>';
    var shell_sprite_url = '<%=image_path('game_sessions/shell_dark.png') %>';

    var view = new View();
    view.run();
  </script>
<% end %>